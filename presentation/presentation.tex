\documentclass{beamer}
\usepackage{tkz-graph}
\usepackage{fancyvrb}
\usetheme{Amsterdam}

\usepackage{verbatim}
\usetikzlibrary{arrows,shapes}

\makeatletter
\newenvironment<>{proofwithoutbox}[1][\proofname]{%
    \par
    \def\insertproofname{#1\@addpunct{.}}%
    \usebeamertemplate{proof begin}#2}
  {\usebeamertemplate{proof end}}
\makeatother

\title[Pattern avoidance]{Pattern avoidance}
\subtitle{An explanation and proof}
\author[Jain, Narayanan and Zhang]{Yajit Jain, Deepak Narayanan and Leon Zhang}
\date[November 2014]{November 14, 2014}

\RecustomVerbatimCommand{\VerbatimInput}{VerbatimInput}%
{fontsize=\tiny,
 commentchar=*        % comment character
}

\begin{document}

\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

\tikzstyle{vertex}=[circle,fill=black!25,minimum size=20pt,inner sep=0pt]
\tikzstyle{selected vertex} = [vertex, fill=red!24]
\tikzstyle{completed vertex} = [vertex, fill=yellow]
\tikzstyle{edge} = [draw,thick,-]
\tikzstyle{weight} = [font=\small]
\tikzstyle{selected edge} = [draw,line width=5pt,-,red!50]
\tikzstyle{ignored edge} = [draw,line width=5pt,-,black!20]

\begin{frame}[plain]
  \titlepage
\end{frame}

\begin{frame}{Plan of action}
    \begin{enumerate}
        \item Introduction
        \item Avoidance in $S_n$
        \item Avoidance in $T_n$
    \end{enumerate}
\end{frame}


\begin{frame}{}
\begin{definition}
A finite sequence of distinct positive integers $a_1a_2\cdots a_n$ avoids another finite sequence of distinct positive integers $b_1\cdots b_k$ with $n\ge k$ if no subsequence $a_{i_1}a_{i_2}\cdots a_{i_k}$ of $a_1a_2\cdots a_n$ has its terms in the same relative order as $b_1\cdots b_k$. 
\end{definition}

\

\

\

Examples!
\end{frame}

\begin{frame}
Given $k$ and $n$, how many permutations of the set $\{1,\cdots, n\}$ avoid a given permutation of the set $\{1,\cdots, k\}$?\

\

\begin{definition}
Let $\pi$ be a permutation of length $k$. Then
$$
s_n(\pi)=\#\{\text{the set of permutations of $\{1,\cdots, n\}$ that avoid $\pi$}\}.
$$
\end{definition}

\

{\color{blue}\LARGE We are going to compute sequences $(s_n(\pi))$}.
\end{frame}

\begin{frame}{Formalities}
\begin{definition}
A permutation of a set $D$ is a bijective map from $D$ to itself. 
\end{definition}
\

\

\

\begin{definition}
$S_n$ is the {\color{red}set} of permutations of $\{1,\cdots, n\}$. 
\end{definition}
\end{frame}

\begin{frame}{Example}
Take $\sigma\in S_5$ with
$$
\sigma=\begin{pmatrix}
1&2&3&4&5\\
\downarrow&\downarrow&\downarrow&\downarrow&\downarrow&\\
4&5&2&1&3
\end{pmatrix}
$$

\

\

\

\begin{columns}
\begin{column}{.5\textwidth}
\centering{\underline{One-line Notation}}
$$
\sigma=45213
$$
\end{column}
\vrule{}
\begin{column}{.5\textwidth}
\centering{\underline{Cycle Notation}}
$$
\sigma=(14)(253)
$$
\end{column}
\end{columns}

\end{frame}

%%%%

\begin{frame}{Example}
Take $\sigma\in S_5$ with
$$
\sigma=\begin{pmatrix}
1&2&3&4&5\\
\downarrow&\downarrow&\downarrow&\downarrow&\downarrow&\\
\color{red}4&\color{red}5&\color{red}2&\color{red}1&\color{red}3
\end{pmatrix}
$$

\

\

\

\begin{columns}
\begin{column}{.5\textwidth}
\centering{\underline{One-line Notation}}
\color{red}$$
\sigma=45213
$$
\end{column}
\vrule{}
\begin{column}{.5\textwidth}
\centering{\underline{Cycle Notation}}
$$
\sigma=(14)(253)
$$
\end{column}
\end{columns}

\end{frame}

%%%%%

\begin{frame}{Example}
Take $\sigma\in S_5$ with
$$
\sigma=\begin{pmatrix}
1&2&3&4&5\\
\color{red}\downarrow&\downarrow&\downarrow&\color{red}\downarrow&\downarrow&\\
4&5&2&1&3
\end{pmatrix}
$$

\

\

\

\begin{columns}
\begin{column}{.5\textwidth}
\centering{\underline{One-line Notation}}
$$
\sigma=45213
$$
\end{column}
\vrule{}
\begin{column}{.5\textwidth}
\centering{\underline{Cycle Notation}}
$$
\sigma={\color{red}(14)}(253)
$$
\end{column}
\end{columns}

\end{frame}


%%%%%%

\begin{frame}{Example}
Take $\sigma\in S_5$ with
$$
\sigma=\begin{pmatrix}
1&2&3&4&5\\
\color{red}\downarrow&\color{green}\downarrow&\color{green}\downarrow&\color{red}\downarrow&\color{green}\downarrow&\\
4&5&2&1&3
\end{pmatrix}
$$

\

\

\

\begin{columns}
\begin{column}{.5\textwidth}
\centering{\underline{One-line Notation}}
$$
\sigma=45213
$$
\end{column}
\vrule{}
\begin{column}{.5\textwidth}
\centering{\underline{Cycle Notation}}
$$
\sigma={\color{red}(14)}{\color{green}(253)}
$$
\end{column}
\end{columns}

\end{frame}


%%%%%%

\begin{frame}

\begin{lemma}[Reversing Lemma]
The permutation $\sigma$ avoids the permutation $\pi$ iff $\mathcal{R}(\sigma)$ avoids $\mathcal{R}(\pi)$.
\end{lemma}
\begin{proof}
Need to only prove one direction (why?).

Suppose that $\mathcal{R}(\sigma)$ does not avoid $\mathcal{R}(\pi)$ if $\sigma$ avoids $\pi$.

Reversing $\mathcal{R}(\sigma)$ again produces a contradiction (why?), which implies that $\mathcal{R}(\sigma)$ avoids $\mathcal{R}(\pi)$ if $\sigma$ avoids $\pi$.

\end{proof}

\begin{corollary} 
For a permutation $\pi$, $s_n(\pi)=s_n(\mathcal{R}(\pi))$. 
\end{corollary}

\end{frame}

\begin{frame}
\begin{definition}[Reversing]
We define the \emph{reverse} of a sequence $a_1\cdots a_n$ to be the sequence $a_n\cdots a_1$.  The flipping operator is denoted by $\mathcal{R}$.  
\end{definition}

\begin{example}
$\mathcal{R}(1324)=4231$.
\end{example}

\begin{example}
$\mathcal{R}(1243)=3421$.
\end{example}

\end{frame}


\begin{frame}
\begin{definition}[Flip of a sequence]
We define the \emph{flip} of a sequence $a$ as the sequence $b$ with the same elements as $a$, but with the largest element swapped with the smallest element, the second largest element swapped with the second smallest element, etc.  The flipping operator is denoted by $\mathcal{F}$.  
\end{definition}

\begin{example}
$\mathcal{F}(1324)=4231$.
\end{example}

\begin{example}
$\mathcal{F}(1243)=4312$.
\end{example}

\end{frame}

\begin{frame}
\begin{definition}[Flip of a sequence]
We define the \emph{flip} of a sequence $a$ as the sequence $b$ with the same elements as $a$, but with the largest element swapped with the smallest element, the second largest element swapped with the second smallest element, etc.  The flipping operator is denoted by $\mathcal{F}$.  
\end{definition}

\begin{example}
$\mathcal{F}(1324)=4231$. {\color{red} $\mathcal{R}(1324)=\mathcal{F}(1324)$}
\end{example}

\begin{example}
$\mathcal{F}(1243)=4312$. {\color{red} $\mathcal{R}(1243)\neq\mathcal{F}(1243)$}
\end{example}

\end{frame}

\begin{frame}
\begin{lemma}[Flipping Lemma]
The permutation $\sigma$ avoids the permutation $\pi$ iff $\mathcal{F}(\sigma)$ avoids $\mathcal{F}(\pi)$.
\end{lemma}

\begin{proof}
As before, need to only prove one direction.

Suppose $\mathcal{F}(\sigma)$ does not avoid $\mathcal{F}(\pi)$ if $\sigma$ avoids $\pi$. (Here, $\sigma \in S_n$ and $\pi \in S_k$)

Let $\mathcal{F}(\sigma)=a_1\cdots a_n$ and let $\mathcal{F}(\pi)=b_1\cdots  b_k$. Then there is some subsequence $a_{i_1}\cdots a_{i_k}$ such that $a_{i_c}<a_{i_d}$ iff $b_c<b_d$.

But then, $n+1-a_{i_c}>n+1-a_{i_d}$ iff $k+1-b_c>k+1-b_d$. This implies that $\sigma$ does not avoid $\pi$, a contradiction (why?). 
\end{proof}

\begin{corollary} 
For a permutation $\pi$, $s_n(\pi)=s_n(\mathcal{F}(\pi))$. 
\end{corollary}

\end{frame}

\begin{frame}
\begin{lemma}
The permutations of $\{1,2,\dots,k,k+1\}$ ending in $i$ that avoid the pattern $312$ are precisely those of the form,
$$\pi_1 \pi_2 i$$
the concatenation of $\pi_1, \pi_2$, and $i$, where $\pi_1$ is a permutation of $\{1,2,\ldots,i-1\}$ that avoids the pattern $312$ and $\pi_2$ is a permutation of $\{i+1,\ldots,k+1\}$ that avoids the pattern $312$.
\end{lemma}
\end{frame}

\begin{frame}
\begin{proof}

Assume that $\exists$ some permutation $\pi$ of $\{1,2,...,k,k+1\}$ that avoids $312$, ending with value $i$ such that some integer $x < i$ is to the right of some integer $y > i$. Clearly, $\pi$ does not avoid 312. (why?)

It follows that for any permutation $\pi$ avoiding $312$ and ending in $i$, all $x < i$ must be to the left of all $y > i$. Hence, $\pi$ can be written as $$\pi_1 \pi_2 i$$ where $\pi_1$ is a permutation of $\{1,2,\ldots,i-1\}$ and $\pi_2$ is a permutation of $\{i+1, i+2,\ldots,k+1\}$.

Furthermore, it is clear that the permutations $\pi_1$ and $\pi_2$ must avoid $312$ as well. (why?)
\end{proof}

\end{frame}

\begin{frame}
\begin{definition}
The Catalan numbers are the sequence of positive integers $C_i$ defined as follows,
$$C_0=1, \, C_{n+1}=\sum_{i=0}^n C_iC_{n-i} \, \text{for} \; n \geq 0$$
\end{definition}

\begin{theorem}
$s_n(312), s_n(132), s_n(213)$, and $s_n(231)$ are equal to $C_n$, the $n^{th}$ Catalan number.
\end{theorem}
\end{frame}

\begin{frame}
\begin{proofwithoutbox}
Assume that for all $i$ from $1$ to $k$, the number of permutations of $\{1,2,...,i\}$ that avoid the order $312$ as a subsequence is $C_i$.

The number of permutations of $\{1,2,...,k,k+1\}$ that avoid $312$ can be counted by enumerating through all possible values of the last term of a valid permutation. 

From the above lemma, all permutations of $\{1,2,...,k,k+1\}$ ending in $i$ that avoid $312$ are precisely those of the form
$$\pi = \pi_1 \pi_2 i$$
where $\pi_1$ is a permutation of $\{1,2,\dots,i-1\}$ that avoids $312$ and $\pi_2$ is a permutation of $\{i+1,i+2,\ldots,k+1\}$ that avoids $312$.
\end{proofwithoutbox}
\end{frame}

\begin{frame}
\begin{proof}[\proofname\ (contd.)]
It follows that the total number of permutations $\pi$ avoiding $312$ and ending in $i$ is
$$C_{i-1} \cdot C_{k-i+1}$$

Summing over all possible values of $i$, the total number of permutations of $\{1,2,...,k+1\}$ that avoid $312$ is equal to,
$$\sum_{i=1}^{k+1} C_{i-1} \cdot C_{k-i+1} = \sum_{i=0}^k C_i \cdot C_{k-i} = C_{k+1}$$

By the flipping lemma and reversing lemma,  $s_n(132)$, $s_n(213)$ and $s_n(231)$ are the sequence of Catalan numbers as well. 
\end{proof}
\end{frame}


\begin{frame}{Avoidance in $T_n$}

\end{frame}

\end{document}